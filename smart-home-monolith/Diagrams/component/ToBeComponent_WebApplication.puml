@startuml
title Умный дом Web Application Component Diagram

top to bottom direction

!includeurl https://raw.githubusercontent.com/RicardoNiepel/C4-PlantUML/master/C4_Component.puml

Container_Boundary(IoTSystem, "Система умного дома") {
  Container(WebApp, "Web Application", "Java, Spring", "Взаимодействие с пользователями")
  Container(Database, "Database", "PostgreSQL", "Хранит данные пользователей и устройств")
  ContainerQueue(ESB, "Интеграционная шина", "Kafka", "обмен информацией между микросервисами")
}

Container(WebApp, "Web Application", "Java, Spring") {
  Component(AuthController, "AuthController", "авторизация и аутентификация пользователей")
  Component(UserController, "UserController", "управление профилем пользователя")
  Component(IoTController, "Модуль управления устройствами", "управление умным домом")
  Component(ServiceLayer, "Service Layer", "бизнес логика умного дома")
  Component(RepositoryLayer, "Repository Layer", "логика доступа к данным")
}

Rel(AuthController,ServiceLayer,"Вызов бизнес логики")
Rel(UserController,ServiceLayer,"Вызов бизнес логики")
Rel(ServiceLayer,RepositoryLayer,"Чтение/запись данных")
Rel(IoTController, ESB, "Запрос на управление устройствами")
Rel(RepositoryLayer,Database,"Чтение и запись информации о пользователях и устройствах")

@enduml